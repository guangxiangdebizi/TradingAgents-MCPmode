# 🌐 智能交易分析系统 - Web界面使用指南

## 📋 概述

本系统现在提供了一个基于Streamlit的现代化Web界面，让您可以通过浏览器实时监控分析过程、查看日志并生成报告。

## 🚀 快速开始

### 1. 安装依赖

```bash
# 安装所有依赖（包括Web界面）
pip install -r requirements.txt
```

### 2. 启动Web应用

有两种方式启动Web应用：

**方式一：使用启动脚本（推荐）**
```bash
python run_webapp.py
```

**方式二：直接使用Streamlit**
```bash
streamlit run streamlit_app.py
```

### 3. 访问应用

启动后，应用会自动在浏览器中打开，默认地址为：
```
http://localhost:8501
```

## 🎯 功能特性

### 📊 实时分析监控
- **进度跟踪**：实时显示当前执行的智能体和整体进度
- **实时日志**：查看所有智能体的工作日志和状态更新
- **状态指示**：清晰的视觉状态指示器（运行中/已完成/错误）

### 🤖 智能体状态面板
- 显示所有12个智能体的状态
- 包括市场分析师、情绪分析师、新闻分析师等
- 实时更新每个智能体的工作状态

### 📄 报告生成与下载
- **多格式支持**：Markdown、DOCX、PDF
- **自定义标题**：可设置报告标题
- **一键下载**：生成后直接下载到本地

### 📋 结果展示
- **结果概览**：快速查看各个分析报告的摘要
- **详细报告**：完整的Markdown格式报告
- **原始数据**：JSON格式的完整分析结果

## 🎮 使用流程

### 步骤1：输入分析问题
1. 在左侧边栏的文本框中输入您的交易分析问题
2. 例如："分析苹果公司的股票投资价值"

### 步骤2：开始分析
1. 点击"🚀 开始分析"按钮
2. 系统将启动多智能体分析流程
3. 您可以实时查看：
   - 当前执行的智能体
   - 整体进度百分比
   - 详细的执行日志

### 步骤3：监控进度
- **进度条**：显示整体完成进度
- **当前智能体**：显示正在工作的智能体
- **实时日志**：查看每个步骤的详细信息
- **智能体状态**：右侧面板显示所有智能体状态

### 步骤4：查看结果
分析完成后，您可以：
- 在"📊 结果概览"标签查看各报告摘要
- 在"📄 详细报告"标签查看完整报告
- 在"🔍 原始数据"标签查看JSON格式数据

### 步骤5：生成报告
1. 在左侧边栏选择报告格式（Markdown/DOCX/PDF）
2. 输入报告标题
3. 点击"📊 生成报告"按钮
4. 点击下载按钮保存报告到本地

## 🛠️ 技术特性

### 🔄 实时更新
- 使用WebSocket技术实现实时日志更新
- 自动刷新进度状态
- 无需手动刷新页面

### 🧵 多线程处理
- 分析过程在后台线程执行
- 不阻塞Web界面响应
- 支持中途停止分析

### 📱 响应式设计
- 适配不同屏幕尺寸
- 现代化的用户界面
- 直观的操作体验

### 🔒 安全性
- 本地运行，数据不外传
- 支持自定义端口和地址
- 安全的文件下载机制

## 🎨 界面说明

### 主界面布局
```
┌─────────────────────────────────────────────────────────┐
│                    智能交易分析系统                        │
├─────────────┬───────────────────────────┬─────────────────┤
│   控制面板   │        主内容区域          │    系统状态      │
│             │                          │                │
│ • 问题输入   │ • 状态显示                │ • 智能体状态     │
│ • 开始分析   │ • 进度跟踪                │ • 统计信息       │
│ • 停止分析   │ • 实时日志                │                │
│ • 报告设置   │ • 结果展示                │                │
│ • 生成报告   │                          │                │
└─────────────┴───────────────────────────┴─────────────────┘
```

### 状态指示器
- 🔄 **运行中**：黄色背景，表示分析正在进行
- ✅ **已完成**：绿色背景，表示分析成功完成
- ❌ **错误**：红色背景，表示分析过程中出现错误
- 💡 **待开始**：灰色背景，等待用户输入

## 🔧 故障排除

### 常见问题

**Q: 无法启动Web应用**
A: 请检查：
1. 是否安装了所有依赖：`pip install -r requirements.txt`
2. 端口8501是否被占用
3. Python版本是否兼容（推荐3.8+）

**Q: 分析过程中断**
A: 请检查：
1. 网络连接是否正常
2. API密钥是否正确配置
3. 查看错误日志获取详细信息

**Q: 无法生成PDF报告**
A: PDF生成需要额外安装wkhtmltopdf：
- Windows: 下载并安装wkhtmltopdf
- macOS: `brew install wkhtmltopdf`
- Linux: `sudo apt-get install wkhtmltopdf`

**Q: 页面无法自动刷新**
A: 请检查：
1. 浏览器是否支持WebSocket
2. 防火墙是否阻止了连接
3. 尝试手动刷新页面

### 性能优化

1. **内存使用**：长时间运行可能占用较多内存，建议定期重启
2. **日志管理**：系统自动限制日志数量，避免内存溢出
3. **并发限制**：同时只能运行一个分析任务

## 📞 技术支持

如果您遇到任何问题或有改进建议，请：
1. 查看控制台错误信息
2. 检查系统日志文件
3. 确认所有依赖正确安装

## 🔄 更新日志

### v1.0.0
- ✨ 新增Streamlit Web界面
- 🔄 实时进度跟踪和日志显示
- 📊 多格式报告生成和下载
- 🎨 现代化响应式设计
- 🛠️ 完整的错误处理和状态管理

---

🎉 **享受您的智能交易分析体验！**